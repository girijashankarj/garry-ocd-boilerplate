# Frontend Project Documentation

Introduction
This document is the single source of truth for frontend projects generated by the garry‑ocd scaffolder. It is written for managers, architects, engineers, QA, and DevOps to align on scope, standards, and delivery expectations.

## Contents

- Overview and scope
- Use cases
- File/folder structure
- Commands and scripts
- Configuration
- Architecture and data flow
- Security
- Logging
- Testing strategy and structure
- Git workflow and quality gates
- CI (PR checks)
- Local developer workflow
- Do and don’t
- References
- Last updated

## Overview and scope

Purpose

- Provide a production‑ready, consistent frontend baseline.

Scope

- Vite + React + TypeScript.
- Optional Tailwind/Bulma and Redux.
- Lottie example and theme toggle.

Out of scope

- Storybook and UI catalog tooling.

## Use cases

- Rapid client project kickoff with strict standards.
- Consistent lint/test/format across teams.

## Use-case diagram (ASCII)

```
Actor: Developer -> (Scaffold Project) -> (Install Deps) -> (Run Dev Server)
Actor: QA        -> (Run Tests) -> (Verify Coverage)
Actor: DevOps    -> (Run CI) -> (Deploy Static Build)
```

## File/folder structure (ASCII)

```
my-app/
├── .github/workflows/pr-check.yml
├── config/
├── docs/
│   └── PROJECT-DOCS.md
├── public/
├── scripts/
│   ├── precommit/
│   ├── inject-badge.js
│   └── verify-tests.js
├── src/
│   ├── assets/
│   ├── common/
│   ├── components/
│   ├── store/
│   ├── utils/
│   ├── App.tsx
│   └── main.tsx
├── tests/
│   ├── mock/
│   └── src/
├── .husky/
├── package.json
└── README.md
```

## Commands and scripts

Core scripts

- npm run dev
- npm run build
- npm run lint
- npm run format
- npm run test
- npm run test:structure

Hook scripts

- pre-commit runs lint-staged + changeset check + test:structure
- commit-msg enforces <ticket-number>: <message>

## Configuration

Required files

- config/theme.json
- config/client.json
- config/env.json

Rules

- No inline config in components.
- No secrets in JSON files.
- Validate config at build time.

Example config (theme.json)

```
{
  "mode": "dark",
  "colors": { "primary": "#0ea5e9", "background": "#0b0b0b" }
}
```

Example config (client.json)

```
{
  "name": "Garry Client",
  "domain": "example.com",
  "supportEmail": "support@example.com",
  "locale": "en-US"
}
```

Example config (env.json)

```
{
  "API_BASE_URL": "VITE_API_BASE_URL"
}
```

Config loading flow (ASCII)

```
[env vars] + [config/*.json] -> [validated config] -> [app]
```

## Architecture and data flow

Flow

- component -> hooks -> utils -> API client

Rules

- No mutation of inputs.
- Use src/common types.
- Keep side-effects in hooks or service layers.

ASCII flow

```
Component -> Hook -> Utils -> API
```

## Security

- No secrets in client builds.
- Validate config files before use.
- Avoid logging PII.

## Logging

Schema

- level, message, context, fileName, functionName, payload

Rules

- Use logger utils only.
- Use message keys from src/common/messages.
- Never log tokens or PII.

Example

```
loggerInfo(INFO_MESSAGES.APP_START, { theme: 'dark' }, OPERATIONS.APP_INIT, FILE_NAMES.APP, 'App');
```

## Testing strategy and structure

Policy

- Every src file has a matching test in tests/src.
- tests/src mirrors src.
- Tests and mocks are linted/formatted and never included in build output.

Coverage

- Minimum 70% across metrics.

Test types

- Component tests (React Testing Library).
- Utility tests (pure functions).

Mocking

- External modules mocked in jest.setup.js.
- Fixtures in tests/mock.

ASCII structure

```
src/path/file.tsx -> tests/src/path/file.test.tsx
```

Test case matrix (frontend)
| ID | Area | Scope | Steps | Expected result |
| --- | --- | --- | --- | --- |
| FE-001 | UI | Bootstrap | Run `npm run dev`, open app | App loads with no console errors |
| FE-002 | Theme | Toggle | Toggle theme button | UI switches dark/light |
| FE-003 | Config | Theme config | Remove required key, run build | Build fails with validation error |
| FE-004 | Tests | Structure | Run `npm run test:structure` | Fails for missing tests |
| FE-005 | Logging | Logger schema | Trigger log event | Log includes level, message, context, file, function |

## Risks and mitigations

Risks

- Missing tests for new files.
- Config drift between environments.
- Inconsistent linting if hooks disabled.

Mitigations

- test:structure enforced in pre-commit and CI.
- Config validation at build time.
- CI blocks merge on lint/test failures.

## Git workflow and quality gates

Branch rules

- main, qa, develop
- feature/_, fix/_, hotfix/\*, release/DD-MM-YYYY

Commit format

- <ticket-number>: <message>

Changesets

- Required for every commit.

## CI (PR checks)

Checks executed

- lint
- format:check
- test:structure
- tests
- build

Failures

- Any failure blocks merge.

## Deployment

Targets

- Static hosting or GitHub Pages.

Checklist

- Build passes
- Config validated
- No secrets in output

## Deployment runbook (frontend)

Pre-deploy

- npm install
- npm run build
- Verify build output exists

Deploy

- Upload build output to static hosting
- Verify environment mapping

Post-deploy

- Smoke test critical routes
- Validate theme toggle and API calls

## Acceptance test cases (frontend)

Functional

- App loads with light and dark theme toggle
- Lottie component renders without errors

Quality

- npm run lint passes with zero warnings
- npm run test passes with coverage >= 70%
- npm run test:structure passes

Config

- theme.json and env.json load successfully
- Missing config keys fail build

## QA checklist

- Verify UI renders with light/dark toggle.
- Ensure tests pass and coverage >= 70%.
- Confirm no lint warnings.
- Validate config files load correctly.

## DevOps checklist

- Ensure CI passes for PR.
- Confirm build output is static and deployable.
- Validate env mapping for deployment target.

## Local developer workflow

1. npm install
2. npm run prepare
3. npm run dev
4. npm test

## Do and don’t

Do

- Add tests for every src file.
- Use src/common for types/constants.
- Keep functions pure.

Don’t

- Put tests under src/**tests**.
- Add inline config in components.
- Log PII or secrets.

## References

- docs/structure-tree.md
- docs/testing/strategy.md
- docs/workflows/ci.md

Last updated: 2025-01-04
