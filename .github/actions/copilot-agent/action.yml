name: 'Copilot agent'
description: 'Run common checks (install, lint, test, build) for a given folder'
inputs:
  folder:
    description: 'Path to target folder (relative to repo root)'
    required: true
runs:
  using: 'composite'
  steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: Setup Node
      uses: actions/setup-node@v4
      with:
        node-version: '18'
    - name: Run checks in folder
      shell: bash
      run: |
        set -e
        cd "${{ inputs.folder }}"
        if [ -f package.json ]; then
          npm ci
          npm run lint --if-present || true
          npm test --if-present || true
          npm run build --if-present || true
        else
          echo "No package.json in $PWD, skipping"
        fi
